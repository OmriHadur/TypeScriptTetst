{
	"types": {
		"create": {
			"barcode": "string"
		},
		"alter": {
			"quantity": "number"
		},
		"entity": {
			"barcode": "string",
			"product": "products",
			"quantity": "number"
		},
		"resource": {
			"id": "string",
			"barcode": "string",
			"product": "products",
			"quantity": "number"
		}
	},
	"mapping": {
		"createToEntity": {
			"product": "modules.products.findOne({barcode:input.barcode})"
		},
		"alterToEntity": {},
		"entityToResource": {
			"id": "input._id"
		}
	},
	"validations": {
		"create": {
			"variables": {
				"product": "modules.products.findOne({barcode:input.barcode})"
			},
			"barcode": {
				"required": true,
				"lengthExact": 13
			},
			"productNotExist": "variables.product"
		},
		"alter": {
			"variables": {},
			"quantity": {
				"positive": true
			}
		}
	}
}
